#!/bin/bash

echo "๐ ุฌุงุฑู ุจุฏุก ุนูููุฉ ุงูุฅุตูุงุญ ูุงูุชุฌููุฒ..."

# 1. ุชุญููู ุฃุฏูุงุช Hyperledger Fabric
if [ ! -d "bin" ]; then
    echo "โฌ ุฌุงุฑู ุชุญููู ุงูุฃุฏูุงุช (Binaries)..."
    curl -sSL https://bit.ly/2ysbOFE | bash -s -- 2.5.9 1.5.7
else
    echo "โ ุงูุฃุฏูุงุช ููุฌูุฏุฉ ูุณุจูุงู."
fi

# 2. ุฅุตูุงุญ ุงูุตูุงุญูุงุช (ูู ุงููุฌูุฏ ุงูุญุงูู ููู ูุง ุชุญุชู)
echo "๐ ููุญ ุตูุงุญูุงุช ุงูุชูููุฐ..."
chmod -R +x .

# 3. ุงูุฏุฎูู ููุฌูุฏ ุงูุดุจูุฉ ูุชุดุบูููุง
cd test-network || { echo "โ ูุฌูุฏ test-network ุบูุฑ ููุฌูุฏ!"; exit 1; }

echo "๐งน ุชูุธูู ุงูุดุจูุฉ ุงููุฏููุฉ..."
./network.sh down

echo "๐ ุชุดุบูู ุงูุดุจูุฉ ูุฅูุดุงุก ุงูููุงุฉ..."
./network.sh up createChannel

echo "๐ ุชู ุงูุงูุชูุงุก ุจูุฌุงุญ!"
